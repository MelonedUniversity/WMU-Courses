# Polish Notation

波兰表示法

## 概要

**波兰表示法**是把运算符置于操作数前的算术表示法，与逆波兰表示法一样，同样可以消除对括号的需要。虽然该表示法同样容易被算法实现，但多应用于学术范畴而非计算器中。

## 介绍

由于你已经了解了RPN，此处直接给出的PN表达应该是易于理解的，例如：

`2 - 1` 表示为 `- 1 2`  
`2 / 1` 表示为 `/ 1 2`  
`1 - 2 * 3` 与 `- 1 * 2 3` 等效

波兰表示法（PN）与逆波兰表示法（RPN）的表达规则是相反的。根据运算符位置的不同，我们将表示法分为**前缀**、**中缀**和**后缀**。容易想到，PN和RPN分别是前缀表示法和后缀表示法的别称。我们日程生活中使用的是中缀表示法。

波兰表示法同样适用于栈基解析，从右至左观察表达式，规则如下：

1. 如果遇到操作数，压入栈中。
2. 如果遇到运算符，从栈中弹出相应的操作数，计算后压入栈中。

重复上述规则直到栈元中仅剩下一个元素，即为结果。

尽管前缀表示法并不常见于计算器实现，但我们仍然能够实现它：

```Haskell
parser "+" (x : y : s) = (x + y) : s
parser "-" (x : y : s) = (x - y) : s
parser "*" (x : y : s) = (x * y) : s
parser "/" (x : y : s) = (x / y) : s
parser " " s = s
parser x s = (read x) : s

calc e s = head $ foldr (\x acc -> parser x acc) s (words e)

main = do
  putStrLn . show . calc "- * / 15 - 7 + 1 1 3 + 2 + 1 1" $ [] -- 5.0
```

你可能已经注意到了，相较于RPN版本，上述代码只是反转了解析方向和作用顺序而已。
